project: bootstrap

vault:
  username: kubernetesadmin
  secretName: vault-password
  key: password

storage:
  default: thorin-dynamic
  backup: thorin-backup
  ssd: thorin-ssd

versions:
  ingressnginx: 4.13.2
  keda: 2.17.2
  externalsecrets: 0.10.5
  certmanager: 1.18.2
  externaldns: 1.18.0
  redis: 20.2.1
  nfsprovisioner: 4.0.18
  gitea: 12.3.0
  giteaactions: 0.0.1
  prometheus: 77.3.0
  starrocks: 1.11.1
  coder: 2.24.2
  verdaccio: 6.1.6
  argoupdater: 0.16
  tailscale: 1.86.5

domains:
  internal: k8s.private
  external: yusufali.ca

otherdomains:
  - pocketgm.ca

certmanager:
  email: ali@yusuf.email

storageClasses:
  - name: thorin-nobackup
    hostname: 192.168.1.3
    mountPath: /nobackup
  - name: thorin-dynamic
    hostname: 192.168.1.3
    mountPath: /dynamic
  - name: thorin-backup
    hostname: 192.168.1.3
    mountPath: /backups
  - name: thorin-ssd
    hostname: 192.168.1.3
    mountPath: /ssd-raid0

tenants:
  - name: media
    namespace: media
    createNamespace: true
    permissions:
      - pvc
    sources:
      - name: configs
        url: https://git.yusufali.ca/drgroot/media.git
        path: "chart"
      - name: base
        url: https://github.com/drgroot/kubespray.git
        path: "charts/template-multi"
        valuesRepo: https://git.yusufali.ca/drgroot/media.git
        valuesFile: values.yaml

  - name: mordor
    namespace: mordor
    createNamespace: true
    permissions:
      - argo
      - pvc
    sources:
      - url: https://git.yusufali.ca/drgroot/mordor.git
        path: ""

  - name: servc-prod
    namespace: servc-prod
    createNamespace: true
    permissions:
      - argo
      - pvc
    ignoreDifferences:
      - group: apps
        kind: Deployment
        jsonPointers:
          - /spec/replicas
    sources:
      - name: infra
        url: https://git.yusufali.ca/serv-c/charts.git
        path: "charts/infra"
        valuesRepo: https://git.yusufali.ca/servc-tenants/charts.git
        valuesFile: "prod/yusufsbasement.infra.yaml"

  - name: servc
    namespace: servc
    createNamespace: true
    permissions:
      - argo
      - rbac
      - pvc
    ignoreDifferences:
      - group: apps
        kind: Deployment
        jsonPointers:
          - /spec/replicas
    sources:
      - name: infra
        url: https://git.yusufali.ca/serv-c/charts.git
        path: "charts/infra"
        valuesRepo: https://git.yusufali.ca/servc-tenants/charts.git
        valuesFile: "nonprod/yusufsbasement.infra.yaml"

  - name: servc-platform
    namespace: servc
    permissions:
      - argo
      - pvc
    ignoreDifferences:
      - group: apps
        kind: Deployment
        jsonPointers:
          - /spec/replicas
    sources:
      - name: servc
        url: https://git.yusufali.ca/serv-c/charts.git
        path: "charts/servc"
        valuesRepo: https://git.yusufali.ca/servc-tenants/charts.git
        valuesFile: "nonprod/yusufsbasement.platform.yaml"
    updater:
      - name: publisher
        image: registry.yusufali.ca/serv-c/servc-core-publisher:latest
      - name: dataservice
        image: registry.yusufali.ca/serv-c/servc-core-data-service:latest
      - name: orchestrator
        image: registry.yusufali.ca/serv-c/servc-core-orchestrator:latest
      - name: llm
        image: registry.yusufali.ca/serv-c/servc-core-llm:latest
      - name: internalapi
        image: registry.yusufali.ca/serv-c/servc-core-api:latest
      - name: provisioner
        image: registry.yusufali.ca/serv-c/servc-core-provisioner:latest
      - name: api
        image: registry.yusufali.ca/serv-c/servc-core-api:latest
        helmImageName: services.external.api.image.name
      

  - name: tenant-chess
    namespace: servc
    ignoreDifferences:
      - group: apps
        kind: Deployment
        jsonPointers:
          - /spec/replicas
    sources:
      - name: chess
        url: https://git.yusufali.ca/serv-c/charts.git
        path: "charts/tenant"
        valuesRepo: https://git.yusufali.ca/servc-tenants/charts.git
        valuesFile: "chess.values.yaml"
    updater:
      - name: ui
        image: registry.yusufali.ca/servc-tenants/chess-ui:latest
        helmImageName: image.repository
        helmImageVersion: image.tag
