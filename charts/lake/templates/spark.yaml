apiVersion: v1
kind: Secret
metadata:
  name: spark-defaults
stringData:
  sparkdefaults: |
    spark.master spark://spark-master-svc.{{ .Release.Namespace }}:7077
    spark.jars.packages org.apache.iceberg:iceberg-spark-runtime-3.5_2.12:1.7.0,org.apache.iceberg:iceberg-aws-bundle:1.7.0,io.delta:delta-spark_2.12:3.2.0
    spark.sql.extensions org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions,io.delta.sql.DeltaSparkSessionExtension
    spark.sql.catalog.spark_catalog org.apache.iceberg.spark.SparkSessionCatalog
    spark.sql.catalog.spark_catalog.type hive
    spark.sql.catalog.lake org.apache.iceberg.spark.SparkCatalog
    spark.sql.catalog.lake.type rest
    spark.sql.catalog.lake.uri https://catalog.{{ .Values.domains.external }}
    spark.sql.catalog.lake.io-impl org.apache.iceberg.aws.s3.S3FileIO
    spark.sql.catalog.lake.default-namespace default
    spark.sql.catalog.lake.warehouse s3://{{ .Values.storageClass.warehouse }}
    spark.sql.catalog.lake.s3.endpoint https://s3.{{ .Values.domains.external }}
    spark.sql.defaultCatalog lake
---
